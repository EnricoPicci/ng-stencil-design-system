# üé® Phase 2: Stencil Design System
## Component Development & Testing

**Duration**: 2-3 days  
**Objective**: Build 4 core Stencil components with comprehensive testing  
**Dependencies**: Phase 1 Complete  
**Next Phase**: Phase 3 - Angular Application

---

## üéØ Phase 2 Objectives

- ‚úÖ Build ds-input component with validation and events
- ‚úÖ Build ds-button component with variants and states
- ‚úÖ Build ds-todo-item component with edit/delete functionality
- ‚úÖ Build ds-todo-list component with empty state handling
- ‚úÖ Create comprehensive unit tests for all components
- ‚úÖ Establish design system styling foundation
- ‚úÖ Generate TypeScript definitions for Angular integration

---

## üèóÔ∏è Component Architecture

### Using Stencil CLI for Component Generation

```bash
cd packages/design-system

# Generate Stencil components using Stencil CLI
npx stencil generate ds-input
npx stencil generate ds-button  
npx stencil generate ds-todo-item
npx stencil generate ds-todo-list

# This automatically creates:
# - Component .tsx file with basic structure
# - Component .scss file  
# - Component .spec.ts test file
# - Updates index.ts exports
```

### Design System Structure (Generated by Stencil CLI + Manual additions)
```
packages/design-system/src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ ds-input/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ds-input.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ds-input.scss
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ds-input.spec.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ds-input.e2e.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ readme.md
‚îÇ   ‚îú‚îÄ‚îÄ ds-button/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ds-button.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ds-button.scss
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ds-button.spec.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ds-button.e2e.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ readme.md
‚îÇ   ‚îú‚îÄ‚îÄ ds-todo-item/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ds-todo-item.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ds-todo-item.scss
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ds-todo-item.spec.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ds-todo-item.e2e.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ readme.md
‚îÇ   ‚îî‚îÄ‚îÄ ds-todo-list/
‚îÇ       ‚îú‚îÄ‚îÄ ds-todo-list.tsx
‚îÇ       ‚îú‚îÄ‚îÄ ds-todo-list.scss
‚îÇ       ‚îú‚îÄ‚îÄ ds-todo-list.spec.ts
‚îÇ       ‚îú‚îÄ‚îÄ ds-todo-list.e2e.ts
‚îÇ       ‚îî‚îÄ‚îÄ readme.md
‚îú‚îÄ‚îÄ styles/
‚îÇ   ‚îú‚îÄ‚îÄ globals.scss
‚îÇ   ‚îú‚îÄ‚îÄ tokens.scss
‚îÇ   ‚îú‚îÄ‚îÄ mixins.scss
‚îÇ   ‚îî‚îÄ‚îÄ utilities.scss
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ helpers.ts
‚îÇ   ‚îî‚îÄ‚îÄ types.ts
‚îî‚îÄ‚îÄ index.ts
```

---

## üé® Design System Foundation

### Design Tokens (styles/tokens.scss)
```scss
// Color Tokens
:host {
  /* Primary Colors */
  --ds-color-primary-50: #eff6ff;
  --ds-color-primary-100: #dbeafe;
  --ds-color-primary-500: #3b82f6;
  --ds-color-primary-600: #2563eb;
  --ds-color-primary-700: #1d4ed8;
  --ds-color-primary-900: #1e3a8a;

  /* Semantic Colors */
  --ds-color-success-500: #10b981;
  --ds-color-success-600: #059669;
  --ds-color-danger-500: #ef4444;
  --ds-color-danger-600: #dc2626;
  --ds-color-warning-500: #f59e0b;
  --ds-color-warning-600: #d97706;

  /* Neutral Colors */
  --ds-color-gray-50: #f9fafb;
  --ds-color-gray-100: #f3f4f6;
  --ds-color-gray-200: #e5e7eb;
  --ds-color-gray-300: #d1d5db;
  --ds-color-gray-400: #9ca3af;
  --ds-color-gray-500: #6b7280;
  --ds-color-gray-600: #4b5563;
  --ds-color-gray-700: #374151;
  --ds-color-gray-800: #1f2937;
  --ds-color-gray-900: #111827;

  /* Typography */
  --ds-font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --ds-font-size-xs: 0.75rem;
  --ds-font-size-sm: 0.875rem;
  --ds-font-size-base: 1rem;
  --ds-font-size-lg: 1.125rem;
  --ds-font-size-xl: 1.25rem;
  --ds-font-size-2xl: 1.5rem;

  /* Spacing */
  --ds-space-1: 0.25rem;
  --ds-space-2: 0.5rem;
  --ds-space-3: 0.75rem;
  --ds-space-4: 1rem;
  --ds-space-5: 1.25rem;
  --ds-space-6: 1.5rem;
  --ds-space-8: 2rem;
  --ds-space-10: 2.5rem;
  --ds-space-12: 3rem;

  /* Border Radius */
  --ds-radius-sm: 0.25rem;
  --ds-radius-md: 0.375rem;
  --ds-radius-lg: 0.5rem;
  --ds-radius-xl: 0.75rem;

  /* Shadows */
  --ds-shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --ds-shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --ds-shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);

  /* Transitions */
  --ds-transition-fast: 150ms ease-in-out;
  --ds-transition-base: 200ms ease-in-out;
  --ds-transition-slow: 300ms ease-in-out;

  /* Z-Index */
  --ds-z-dropdown: 1000;
  --ds-z-modal: 1050;
  --ds-z-tooltip: 1100;
}
```

### Global Styles (styles/globals.scss)
```scss
@import 'tokens';

// Reset and base styles
*,
*::before,
*::after {
  box-sizing: border-box;
}

// Focus styles for accessibility
*:focus-visible {
  outline: 2px solid var(--ds-color-primary-500);
  outline-offset: 2px;
}

// Utility classes
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}
```

---

## üß© Component Implementations

### 1. DS-Input Component

#### ds-input.tsx
```typescript
import { Component, Element, Event, EventEmitter, Prop, State, Watch, h } from '@stencil/core';

export interface InputChangeEvent {
  value: string;
  isValid: boolean;
}

@Component({
  tag: 'ds-input',
  styleUrl: 'ds-input.scss',
  shadow: true,
})
export class DsInput {
  @Element() host: HTMLElement;

  // Properties
  @Prop() value: string = '';
  @Prop() placeholder: string = '';
  @Prop() disabled: boolean = false;
  @Prop() required: boolean = false;
  @Prop() type: 'text' | 'email' | 'password' = 'text';
  @Prop() maxlength?: number;
  @Prop() autocomplete?: string;
  @Prop() ariaLabel?: string;
  @Prop() errorMessage?: string;

  // State
  @State() focused: boolean = false;
  @State() hasError: boolean = false;
  @State() internalValue: string = '';

  // Events
  @Event() dsInput: EventEmitter<string>;
  @Event() dsChange: EventEmitter<InputChangeEvent>;
  @Event() dsFocus: EventEmitter<FocusEvent>;
  @Event() dsBlur: EventEmitter<FocusEvent>;
  @Event() dsKeyUp: EventEmitter<KeyboardEvent>;
  @Event() dsKeyDown: EventEmitter<KeyboardEvent>;

  private inputElement?: HTMLInputElement;

  @Watch('value')
  watchValue(newValue: string) {
    this.internalValue = newValue;
    this.validateInput();
  }

  componentWillLoad() {
    this.internalValue = this.value;
    this.validateInput();
  }

  private validateInput() {
    this.hasError = this.required && this.internalValue.trim().length === 0;
  }

  private handleInput = (event: Event) => {
    const target = event.target as HTMLInputElement;
    this.internalValue = target.value;
    this.dsInput.emit(this.internalValue);
    this.validateInput();
  };

  private handleChange = (event: Event) => {
    const target = event.target as HTMLInputElement;
    this.dsChange.emit({
      value: target.value,
      isValid: !this.hasError
    });
  };

  private handleFocus = (event: FocusEvent) => {
    this.focused = true;
    this.dsFocus.emit(event);
  };

  private handleBlur = (event: FocusEvent) => {
    this.focused = false;
    this.dsBlur.emit(event);
    this.validateInput();
  };

  private handleKeyUp = (event: KeyboardEvent) => {
    this.dsKeyUp.emit(event);
  };

  private handleKeyDown = (event: KeyboardEvent) => {
    this.dsKeyDown.emit(event);
  };

  render() {
    const inputClasses = {
      'input': true,
      'input--focused': this.focused,
      'input--error': this.hasError,
      'input--disabled': this.disabled
    };

    return (
      <div class="input-wrapper">
        <input
          ref={(el) => this.inputElement = el}
          class={inputClasses}
          type={this.type}
          value={this.internalValue}
          placeholder={this.placeholder}
          disabled={this.disabled}
          required={this.required}
          maxlength={this.maxlength}
          autocomplete={this.autocomplete}
          aria-label={this.ariaLabel}
          aria-invalid={this.hasError ? 'true' : 'false'}
          aria-describedby={this.hasError ? 'error-message' : undefined}
          onInput={this.handleInput}
          onChange={this.handleChange}
          onFocus={this.handleFocus}
          onBlur={this.handleBlur}
          onKeyUp={this.handleKeyUp}
          onKeyDown={this.handleKeyDown}
        />
        {this.hasError && this.errorMessage && (
          <div id="error-message" class="error-message" role="alert">
            {this.errorMessage}
          </div>
        )}
      </div>
    );
  }
}
```

#### ds-input.scss
```scss
@import '../../styles/tokens';

:host {
  display: block;
  width: 100%;
}

.input-wrapper {
  position: relative;
  width: 100%;
}

.input {
  width: 100%;
  padding: var(--ds-space-3) var(--ds-space-4);
  font-family: var(--ds-font-family);
  font-size: var(--ds-font-size-base);
  line-height: 1.5;
  color: var(--ds-color-gray-900);
  background-color: white;
  border: 1px solid var(--ds-color-gray-300);
  border-radius: var(--ds-radius-md);
  box-shadow: var(--ds-shadow-sm);
  transition: border-color var(--ds-transition-fast),
              box-shadow var(--ds-transition-fast);

  &::placeholder {
    color: var(--ds-color-gray-400);
  }

  &:hover:not(:disabled) {
    border-color: var(--ds-color-gray-400);
  }

  &--focused {
    border-color: var(--ds-color-primary-500);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    outline: none;
  }

  &--error {
    border-color: var(--ds-color-danger-500);
    box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);

    &:focus {
      border-color: var(--ds-color-danger-500);
      box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
    }
  }

  &--disabled {
    background-color: var(--ds-color-gray-50);
    color: var(--ds-color-gray-400);
    cursor: not-allowed;

    &::placeholder {
      color: var(--ds-color-gray-300);
    }
  }
}

.error-message {
  margin-top: var(--ds-space-1);
  font-size: var(--ds-font-size-sm);
  color: var(--ds-color-danger-600);
}

// Responsive
@media (max-width: 640px) {
  .input {
    padding: var(--ds-space-4);
    font-size: var(--ds-font-size-lg);
  }
}
```

### 2. DS-Button Component

#### ds-button.tsx
```typescript
import { Component, Element, Event, EventEmitter, Prop, h } from '@stencil/core';

export type ButtonVariant = 'primary' | 'secondary' | 'danger' | 'ghost';
export type ButtonSize = 'sm' | 'md' | 'lg';

@Component({
  tag: 'ds-button',
  styleUrl: 'ds-button.scss',
  shadow: true,
})
export class DsButton {
  @Element() host: HTMLElement;

  // Properties
  @Prop() variant: ButtonVariant = 'primary';
  @Prop() size: ButtonSize = 'md';
  @Prop() disabled: boolean = false;
  @Prop() loading: boolean = false;
  @Prop() fullWidth: boolean = false;
  @Prop() type: 'button' | 'submit' | 'reset' = 'button';
  @Prop() ariaLabel?: string;

  // Events
  @Event() dsClick: EventEmitter<MouseEvent>;
  @Event() dsFocus: EventEmitter<FocusEvent>;
  @Event() dsBlur: EventEmitter<FocusEvent>;

  private handleClick = (event: MouseEvent) => {
    if (!this.disabled && !this.loading) {
      this.dsClick.emit(event);
    }
  };

  private handleFocus = (event: FocusEvent) => {
    this.dsFocus.emit(event);
  };

  private handleBlur = (event: FocusEvent) => {
    this.dsBlur.emit(event);
  };

  render() {
    const buttonClasses = {
      'btn': true,
      [`btn--${this.variant}`]: true,
      [`btn--${this.size}`]: true,
      'btn--full-width': this.fullWidth,
      'btn--loading': this.loading,
      'btn--disabled': this.disabled
    };

    return (
      <button
        class={buttonClasses}
        type={this.type}
        disabled={this.disabled || this.loading}
        aria-label={this.ariaLabel}
        aria-busy={this.loading ? 'true' : 'false'}
        onClick={this.handleClick}
        onFocus={this.handleFocus}
        onBlur={this.handleBlur}
      >
        {this.loading && (
          <span class="btn__spinner" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none">
              <circle
                cx="12"
                cy="12"
                r="10"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-dasharray="32"
                stroke-dashoffset="32"
              >
                <animate
                  attributeName="stroke-dasharray"
                  dur="2s"
                  values="0 32;16 16;0 32;0 32"
                  repeatCount="indefinite"
                />
                <animate
                  attributeName="stroke-dashoffset"
                  dur="2s"
                  values="0;-16;-32;-32"
                  repeatCount="indefinite"
                />
              </circle>
            </svg>
          </span>
        )}
        <span class={{'btn__content': true, 'sr-only': this.loading}}>
          <slot></slot>
        </span>
      </button>
    );
  }
}
```

#### ds-button.scss
```scss
@import '../../styles/tokens';

:host {
  display: inline-block;
}

.btn {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--ds-space-2);
  font-family: var(--ds-font-family);
  font-weight: 500;
  text-decoration: none;
  border: 1px solid transparent;
  border-radius: var(--ds-radius-md);
  cursor: pointer;
  transition: all var(--ds-transition-fast);
  user-select: none;

  &:focus-visible {
    outline: 2px solid var(--ds-color-primary-500);
    outline-offset: 2px;
  }

  // Variants
  &--primary {
    color: white;
    background-color: var(--ds-color-primary-600);
    border-color: var(--ds-color-primary-600);

    &:hover:not(:disabled) {
      background-color: var(--ds-color-primary-700);
      border-color: var(--ds-color-primary-700);
    }

    &:active:not(:disabled) {
      background-color: var(--ds-color-primary-800);
      border-color: var(--ds-color-primary-800);
    }
  }

  &--secondary {
    color: var(--ds-color-gray-700);
    background-color: white;
    border-color: var(--ds-color-gray-300);

    &:hover:not(:disabled) {
      background-color: var(--ds-color-gray-50);
      border-color: var(--ds-color-gray-400);
    }

    &:active:not(:disabled) {
      background-color: var(--ds-color-gray-100);
    }
  }

  &--danger {
    color: white;
    background-color: var(--ds-color-danger-600);
    border-color: var(--ds-color-danger-600);

    &:hover:not(:disabled) {
      background-color: var(--ds-color-danger-700);
      border-color: var(--ds-color-danger-700);
    }

    &:active:not(:disabled) {
      background-color: var(--ds-color-danger-800);
      border-color: var(--ds-color-danger-800);
    }
  }

  &--ghost {
    color: var(--ds-color-gray-600);
    background-color: transparent;
    border-color: transparent;

    &:hover:not(:disabled) {
      color: var(--ds-color-gray-900);
      background-color: var(--ds-color-gray-100);
    }

    &:active:not(:disabled) {
      background-color: var(--ds-color-gray-200);
    }
  }

  // Sizes
  &--sm {
    padding: var(--ds-space-2) var(--ds-space-3);
    font-size: var(--ds-font-size-sm);
    min-height: 2rem;
  }

  &--md {
    padding: var(--ds-space-3) var(--ds-space-4);
    font-size: var(--ds-font-size-base);
    min-height: 2.5rem;
  }

  &--lg {
    padding: var(--ds-space-4) var(--ds-space-6);
    font-size: var(--ds-font-size-lg);
    min-height: 3rem;
  }

  // Modifiers
  &--full-width {
    width: 100%;
  }

  &--disabled {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
  }

  &--loading {
    cursor: wait;
  }

  // Spinner
  &__spinner {
    width: 1em;
    height: 1em;
    display: inline-block;

    svg {
      width: 100%;
      height: 100%;
    }
  }

  &__content {
    display: inline-flex;
    align-items: center;
    gap: var(--ds-space-2);
  }
}

// Mobile optimizations
@media (max-width: 640px) {
  .btn {
    min-height: 44px; // Touch target
    
    &--sm {
      min-height: 40px;
    }
    
    &--lg {
      min-height: 48px;
    }
  }
}
```

### 3. DS-Todo-Item Component

#### ds-todo-item.tsx
```typescript
import { Component, Element, Event, EventEmitter, Prop, State, Watch, h } from '@stencil/core';

export interface TodoItem {
  id: string;
  text: string;
  completed: boolean;
  createdAt: Date;
  updatedAt: Date;
}

export interface TodoUpdateEvent {
  id: string;
  text: string;
}

export interface TodoDeleteEvent {
  id: string;
}

export interface TodoToggleEvent {
  id: string;
  completed: boolean;
}

@Component({
  tag: 'ds-todo-item',
  styleUrl: 'ds-todo-item.scss',
  shadow: true,
})
export class DsTodoItem {
  @Element() host: HTMLElement;

  // Properties
  @Prop() todo: TodoItem;
  @Prop() editable: boolean = true;

  // State
  @State() isEditing: boolean = false;
  @State() editText: string = '';

  // Events
  @Event() todoUpdate: EventEmitter<TodoUpdateEvent>;
  @Event() todoDelete: EventEmitter<TodoDeleteEvent>;
  @Event() todoToggle: EventEmitter<TodoToggleEvent>;

  private inputElement?: HTMLInputElement;

  @Watch('todo')
  watchTodo(newTodo: TodoItem) {
    if (newTodo) {
      this.editText = newTodo.text;
    }
  }

  componentWillLoad() {
    if (this.todo) {
      this.editText = this.todo.text;
    }
  }

  private startEdit = () => {
    if (!this.editable) return;
    
    this.isEditing = true;
    this.editText = this.todo.text;
    
    // Focus input after render
    setTimeout(() => {
      if (this.inputElement) {
        this.inputElement.focus();
        this.inputElement.select();
      }
    }, 10);
  };

  private saveEdit = () => {
    const trimmedText = this.editText.trim();
    if (trimmedText && trimmedText !== this.todo.text) {
      this.todoUpdate.emit({
        id: this.todo.id,
        text: trimmedText
      });
    }
    this.isEditing = false;
  };

  private cancelEdit = () => {
    this.editText = this.todo.text;
    this.isEditing = false;
  };

  private handleKeyDown = (event: KeyboardEvent) => {
    if (event.key === 'Enter') {
      event.preventDefault();
      this.saveEdit();
    } else if (event.key === 'Escape') {
      event.preventDefault();
      this.cancelEdit();
    }
  };

  private handleInputChange = (event: Event) => {
    const target = event.target as HTMLInputElement;
    this.editText = target.value;
  };

  private handleToggle = () => {
    this.todoToggle.emit({
      id: this.todo.id,
      completed: !this.todo.completed
    });
  };

  private handleDelete = () => {
    this.todoDelete.emit({
      id: this.todo.id
    });
  };

  render() {
    if (!this.todo) {
      return null;
    }

    const itemClasses = {
      'todo-item': true,
      'todo-item--completed': this.todo.completed,
      'todo-item--editing': this.isEditing
    };

    return (
      <div class={itemClasses}>
        <div class="todo-item__content">
          <label class="todo-item__checkbox-wrapper">
            <input
              type="checkbox"
              class="todo-item__checkbox"
              checked={this.todo.completed}
              onChange={this.handleToggle}
              aria-label={`Mark "${this.todo.text}" as ${this.todo.completed ? 'incomplete' : 'complete'}`}
            />
            <span class="todo-item__checkmark" aria-hidden="true"></span>
          </label>

          {this.isEditing ? (
            <div class="todo-item__edit-wrapper">
              <input
                ref={(el) => this.inputElement = el}
                type="text"
                class="todo-item__edit-input"
                value={this.editText}
                onInput={this.handleInputChange}
                onKeyDown={this.handleKeyDown}
                onBlur={this.saveEdit}
                aria-label="Edit todo text"
              />
              <div class="todo-item__edit-actions">
                <ds-button
                  variant="primary"
                  size="sm"
                  onClick={this.saveEdit}
                  aria-label="Save changes"
                >
                  Save
                </ds-button>
                <ds-button
                  variant="ghost"
                  size="sm"
                  onClick={this.cancelEdit}
                  aria-label="Cancel editing"
                >
                  Cancel
                </ds-button>
              </div>
            </div>
          ) : (
            <div class="todo-item__text-wrapper">
              <span
                class="todo-item__text"
                onClick={this.startEdit}
                tabindex={this.editable ? 0 : -1}
                role={this.editable ? 'button' : undefined}
                aria-label={this.editable ? `Edit "${this.todo.text}"` : undefined}
                onKeyDown={(e) => {
                  if (this.editable && (e.key === 'Enter' || e.key === ' ')) {
                    e.preventDefault();
                    this.startEdit();
                  }
                }}
              >
                {this.todo.text}
              </span>
            </div>
          )}
        </div>

        <div class="todo-item__actions">
          <ds-button
            variant="danger"
            size="sm"
            onClick={this.handleDelete}
            aria-label={`Delete "${this.todo.text}"`}
          >
            Delete
          </ds-button>
        </div>
      </div>
    );
  }
}
```

#### ds-todo-item.scss
```scss
@import '../../styles/tokens';

:host {
  display: block;
  width: 100%;
}

.todo-item {
  display: flex;
  align-items: flex-start;
  gap: var(--ds-space-3);
  padding: var(--ds-space-4);
  background-color: white;
  border: 1px solid var(--ds-color-gray-200);
  border-radius: var(--ds-radius-lg);
  box-shadow: var(--ds-shadow-sm);
  transition: all var(--ds-transition-fast);

  &:hover:not(&--editing) {
    border-color: var(--ds-color-gray-300);
    box-shadow: var(--ds-shadow-md);
  }

  &--completed {
    background-color: var(--ds-color-gray-50);
    
    .todo-item__text {
      text-decoration: line-through;
      color: var(--ds-color-gray-500);
    }
  }

  &--editing {
    border-color: var(--ds-color-primary-300);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  }

  &__content {
    display: flex;
    align-items: flex-start;
    gap: var(--ds-space-3);
    flex: 1;
    min-width: 0;
  }

  &__checkbox-wrapper {
    position: relative;
    display: flex;
    cursor: pointer;
    user-select: none;
  }

  &__checkbox {
    position: absolute;
    opacity: 0;
    cursor: pointer;
    height: 0;
    width: 0;

    &:checked + .todo-item__checkmark {
      background-color: var(--ds-color-primary-600);
      border-color: var(--ds-color-primary-600);

      &::after {
        display: block;
      }
    }

    &:focus + .todo-item__checkmark {
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
  }

  &__checkmark {
    position: relative;
    height: 20px;
    width: 20px;
    background-color: white;
    border: 2px solid var(--ds-color-gray-300);
    border-radius: var(--ds-radius-sm);
    transition: all var(--ds-transition-fast);

    &::after {
      content: '';
      position: absolute;
      display: none;
      left: 5px;
      top: 2px;
      width: 6px;
      height: 10px;
      border: solid white;
      border-width: 0 2px 2px 0;
      transform: rotate(45deg);
    }
  }

  &__text-wrapper {
    flex: 1;
    min-width: 0;
  }

  &__text {
    display: block;
    font-size: var(--ds-font-size-base);
    line-height: 1.5;
    color: var(--ds-color-gray-900);
    word-wrap: break-word;
    cursor: pointer;
    border-radius: var(--ds-radius-sm);
    padding: var(--ds-space-1);
    margin: calc(var(--ds-space-1) * -1);
    transition: background-color var(--ds-transition-fast);

    &:hover {
      background-color: var(--ds-color-gray-50);
    }

    &:focus {
      outline: 2px solid var(--ds-color-primary-500);
      outline-offset: 2px;
    }
  }

  &__edit-wrapper {
    flex: 1;
    min-width: 0;
  }

  &__edit-input {
    width: 100%;
    padding: var(--ds-space-2) var(--ds-space-3);
    font-size: var(--ds-font-size-base);
    line-height: 1.5;
    color: var(--ds-color-gray-900);
    background-color: white;
    border: 1px solid var(--ds-color-primary-300);
    border-radius: var(--ds-radius-md);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    transition: border-color var(--ds-transition-fast);

    &:focus {
      outline: none;
      border-color: var(--ds-color-primary-500);
    }
  }

  &__edit-actions {
    display: flex;
    gap: var(--ds-space-2);
    margin-top: var(--ds-space-2);
  }

  &__actions {
    display: flex;
    align-items: flex-start;
    gap: var(--ds-space-2);
  }
}

// Mobile optimizations
@media (max-width: 640px) {
  .todo-item {
    padding: var(--ds-space-3);
    
    &__edit-actions {
      flex-direction: column;
      align-items: stretch;
    }
    
    &__actions {
      flex-direction: column;
    }
  }
}
```

### 4. DS-Todo-List Component

#### ds-todo-list.tsx
```typescript
import { Component, Element, Event, EventEmitter, Prop, h } from '@stencil/core';
import { TodoItem, TodoUpdateEvent, TodoDeleteEvent, TodoToggleEvent } from '../ds-todo-item/ds-todo-item';

@Component({
  tag: 'ds-todo-list',
  styleUrl: 'ds-todo-list.scss',
  shadow: true,
})
export class DsTodoList {
  @Element() host: HTMLElement;

  // Properties
  @Prop() todos: TodoItem[] = [];
  @Prop() emptyMessage: string = 'No todos yet. Add one above!';
  @Prop() showStats: boolean = true;

  // Events
  @Event() todoUpdate: EventEmitter<TodoUpdateEvent>;
  @Event() todoDelete: EventEmitter<TodoDeleteEvent>;
  @Event() todoToggle: EventEmitter<TodoToggleEvent>;

  private handleTodoUpdate = (event: CustomEvent<TodoUpdateEvent>) => {
    this.todoUpdate.emit(event.detail);
  };

  private handleTodoDelete = (event: CustomEvent<TodoDeleteEvent>) => {
    this.todoDelete.emit(event.detail);
  };

  private handleTodoToggle = (event: CustomEvent<TodoToggleEvent>) => {
    this.todoToggle.emit(event.detail);
  };

  private get completedCount() {
    return this.todos.filter(todo => todo.completed).length;
  }

  private get remainingCount() {
    return this.todos.filter(todo => !todo.completed).length;
  }

  render() {
    const hasItems = this.todos && this.todos.length > 0;

    return (
      <div class="todo-list">
        {this.showStats && hasItems && (
          <div class="todo-list__stats">
            <span class="todo-list__stat">
              {this.remainingCount} of {this.todos.length} remaining
            </span>
            {this.completedCount > 0 && (
              <span class="todo-list__stat todo-list__stat--secondary">
                {this.completedCount} completed
              </span>
            )}
          </div>
        )}

        {hasItems ? (
          <ul class="todo-list__items" role="list">
            {this.todos.map((todo) => (
              <li
                key={todo.id}
                class="todo-list__item"
                role="listitem"
              >
                <ds-todo-item
                  todo={todo}
                  editable={true}
                  onTodoUpdate={this.handleTodoUpdate}
                  onTodoDelete={this.handleTodoDelete}
                  onTodoToggle={this.handleTodoToggle}
                />
              </li>
            ))}
          </ul>
        ) : (
          <div class="todo-list__empty" role="status" aria-live="polite">
            <div class="todo-list__empty-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <p class="todo-list__empty-message">{this.emptyMessage}</p>
          </div>
        )}
      </div>
    );
  }
}
```

#### ds-todo-list.scss
```scss
@import '../../styles/tokens';

:host {
  display: block;
  width: 100%;
}

.todo-list {
  width: 100%;

  &__stats {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--ds-space-4);
    padding: var(--ds-space-4) var(--ds-space-2);
    margin-bottom: var(--ds-space-4);
    background-color: var(--ds-color-gray-50);
    border-radius: var(--ds-radius-lg);
  }

  &__stat {
    font-size: var(--ds-font-size-sm);
    font-weight: 500;
    color: var(--ds-color-gray-700);

    &--secondary {
      color: var(--ds-color-gray-500);
    }
  }

  &__items {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: var(--ds-space-3);
  }

  &__item {
    width: 100%;
  }

  &__empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--ds-space-12) var(--ds-space-4);
    text-align: center;
    color: var(--ds-color-gray-500);
  }

  &__empty-icon {
    width: 3rem;
    height: 3rem;
    margin-bottom: var(--ds-space-4);
    color: var(--ds-color-gray-400);

    svg {
      width: 100%;
      height: 100%;
    }
  }

  &__empty-message {
    font-size: var(--ds-font-size-lg);
    font-weight: 500;
    color: var(--ds-color-gray-600);
    margin: 0;
  }
}

// Mobile optimizations
@media (max-width: 640px) {
  .todo-list {
    &__stats {
      flex-direction: column;
      align-items: flex-start;
      gap: var(--ds-space-2);
    }

    &__empty {
      padding: var(--ds-space-8) var(--ds-space-4);
    }

    &__empty-message {
      font-size: var(--ds-font-size-base);
    }
  }
}
```

---

## üß™ Testing Implementation

### Unit Test Example (ds-input.spec.ts)
```typescript
import { newSpecPage } from '@stencil/core/testing';
import { DsInput } from './ds-input';

describe('ds-input', () => {
  it('renders correctly with default props', async () => {
    const page = await newSpecPage({
      components: [DsInput],
      html: `<ds-input></ds-input>`,
    });
    
    expect(page.root).toEqualHtml(`
      <ds-input>
        <mock:shadow-root>
          <div class="input-wrapper">
            <input class="input" type="text" value="" />
          </div>
        </mock:shadow-root>
      </ds-input>
    `);
  });

  it('emits dsInput event when user types', async () => {
    const page = await newSpecPage({
      components: [DsInput],
      html: `<ds-input value="initial"></ds-input>`,
    });

    const input = page.root.shadowRoot.querySelector('input');
    const spy = jest.fn();
    page.root.addEventListener('dsInput', spy);

    input.value = 'new value';
    input.dispatchEvent(new Event('input'));

    expect(spy).toHaveBeenCalledWith(
      expect.objectContaining({
        detail: 'new value'
      })
    );
  });

  it('shows error state when required and empty', async () => {
    const page = await newSpecPage({
      components: [DsInput],
      html: `<ds-input required error-message="This field is required"></ds-input>`,
    });

    const input = page.root.shadowRoot.querySelector('input');
    input.dispatchEvent(new Event('blur'));
    await page.waitForChanges();

    const errorMessage = page.root.shadowRoot.querySelector('.error-message');
    expect(errorMessage).toBeTruthy();
    expect(errorMessage.textContent).toBe('This field is required');
  });
});
```

---

## ‚úÖ Success Criteria

### Phase 2 Complete When:
- [ ] **All 4 Components**: ds-input, ds-button, ds-todo-item, ds-todo-list implemented
- [ ] **Design System**: Global styles and design tokens established
- [ ] **TypeScript**: All components properly typed with interfaces
- [ ] **Unit Tests**: 90%+ test coverage for all components
- [ ] **Build Success**: `npm run build -w packages/design-system` completes
- [ ] **Documentation**: Component README files generated
- [ ] **Integration Ready**: Angular output target generates proper bindings

### Validation Commands:
```bash
# Test component builds
npm run build -w packages/design-system

# Run unit tests
npm run test -w packages/design-system

# Start dev server
npm run start -w packages/design-system

# Generate documentation
npm run generate -w packages/design-system
```

---

## üìã Phase 2 Checklist

**Using Stencil CLI Commands:**
- [ ] **Generate components**: `npx stencil generate ds-input` (+ button, todo-item, todo-list)
- [ ] **Create design system foundation** (tokens, globals, mixins)
- [ ] **Update generated components** with our implementation code
- [ ] **Configure component styling** in generated .scss files
- [ ] **Implement component logic** in generated .tsx files
- [ ] **Write comprehensive unit tests** in generated .spec.ts files
- [ ] **Generate component documentation** with `npm run build` (auto-generates README)
- [ ] **Configure Angular output target** in stencil.config.ts
- [ ] **Verify component builds** with `npm run build`
- [ ] **Test components** with `npm run start` (Stencil dev server)

**‚úÖ Advantages of Stencil CLI Approach:**
- Automatic component file structure setup
- Consistent naming conventions
- Test files (.spec.ts) automatically generated  
- Component registration handled automatically
- Proper imports and exports configured
- Development server integration ready

---

## üéØ Next Steps

Once Phase 2 is complete:
1. **Proceed to Phase 3**: Angular Application Development
2. **Verify Integration**: Angular can import and use Stencil components
3. **Test Component APIs**: Ensure event binding works in Angular

**Phase 3 Prerequisites Met:**
‚úÖ All Stencil components built and tested  
‚úÖ TypeScript definitions generated  
‚úÖ Angular output target configured  
‚úÖ Component APIs documented